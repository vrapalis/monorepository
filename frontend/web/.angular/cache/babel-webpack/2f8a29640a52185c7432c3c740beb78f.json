{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bufferTime = void 0;\n\nvar Subscription_1 = require(\"../Subscription\");\n\nvar lift_1 = require(\"../util/lift\");\n\nvar OperatorSubscriber_1 = require(\"./OperatorSubscriber\");\n\nvar arrRemove_1 = require(\"../util/arrRemove\");\n\nvar async_1 = require(\"../scheduler/async\");\n\nvar args_1 = require(\"../util/args\");\n\nvar executeSchedule_1 = require(\"../util/executeSchedule\");\n\nfunction bufferTime(bufferTimeSpan) {\n  var _a, _b;\n\n  var otherArgs = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    otherArgs[_i - 1] = arguments[_i];\n  }\n\n  var scheduler = (_a = args_1.popScheduler(otherArgs)) !== null && _a !== void 0 ? _a : async_1.asyncScheduler;\n  var bufferCreationInterval = (_b = otherArgs[0]) !== null && _b !== void 0 ? _b : null;\n  var maxBufferSize = otherArgs[1] || Infinity;\n  return lift_1.operate(function (source, subscriber) {\n    var bufferRecords = [];\n    var restartOnEmit = false;\n\n    var emit = function (record) {\n      var buffer = record.buffer,\n          subs = record.subs;\n      subs.unsubscribe();\n      arrRemove_1.arrRemove(bufferRecords, record);\n      subscriber.next(buffer);\n      restartOnEmit && startBuffer();\n    };\n\n    var startBuffer = function () {\n      if (bufferRecords) {\n        var subs = new Subscription_1.Subscription();\n        subscriber.add(subs);\n        var buffer = [];\n        var record_1 = {\n          buffer: buffer,\n          subs: subs\n        };\n        bufferRecords.push(record_1);\n        executeSchedule_1.executeSchedule(subs, scheduler, function () {\n          return emit(record_1);\n        }, bufferTimeSpan);\n      }\n    };\n\n    if (bufferCreationInterval !== null && bufferCreationInterval >= 0) {\n      executeSchedule_1.executeSchedule(subscriber, scheduler, startBuffer, bufferCreationInterval, true);\n    } else {\n      restartOnEmit = true;\n    }\n\n    startBuffer();\n    var bufferTimeSubscriber = new OperatorSubscriber_1.OperatorSubscriber(subscriber, function (value) {\n      var e_1, _a;\n\n      var recordsCopy = bufferRecords.slice();\n\n      try {\n        for (var recordsCopy_1 = __values(recordsCopy), recordsCopy_1_1 = recordsCopy_1.next(); !recordsCopy_1_1.done; recordsCopy_1_1 = recordsCopy_1.next()) {\n          var record = recordsCopy_1_1.value;\n          var buffer = record.buffer;\n          buffer.push(value);\n          maxBufferSize <= buffer.length && emit(record);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (recordsCopy_1_1 && !recordsCopy_1_1.done && (_a = recordsCopy_1.return)) _a.call(recordsCopy_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }, function () {\n      while (bufferRecords === null || bufferRecords === void 0 ? void 0 : bufferRecords.length) {\n        subscriber.next(bufferRecords.shift().buffer);\n      }\n\n      bufferTimeSubscriber === null || bufferTimeSubscriber === void 0 ? void 0 : bufferTimeSubscriber.unsubscribe();\n      subscriber.complete();\n      subscriber.unsubscribe();\n    }, undefined, function () {\n      return bufferRecords = null;\n    });\n    source.subscribe(bufferTimeSubscriber);\n  });\n}\n\nexports.bufferTime = bufferTime;","map":{"version":3,"sources":["/home/vitali/Workspace/vrapalis/monorepository/frontend/web/node_modules/rxjs/dist/cjs/internal/operators/bufferTime.js"],"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","Object","defineProperty","exports","bufferTime","Subscription_1","require","lift_1","OperatorSubscriber_1","arrRemove_1","async_1","args_1","executeSchedule_1","bufferTimeSpan","_a","_b","otherArgs","_i","arguments","scheduler","popScheduler","asyncScheduler","bufferCreationInterval","maxBufferSize","Infinity","operate","source","subscriber","bufferRecords","restartOnEmit","emit","record","buffer","subs","unsubscribe","arrRemove","startBuffer","Subscription","add","record_1","push","executeSchedule","bufferTimeSubscriber","OperatorSubscriber","e_1","recordsCopy","slice","recordsCopy_1","recordsCopy_1_1","e_1_1","error","return","shift","complete","undefined","subscribe"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bufferTime = void 0;\nvar Subscription_1 = require(\"../Subscription\");\nvar lift_1 = require(\"../util/lift\");\nvar OperatorSubscriber_1 = require(\"./OperatorSubscriber\");\nvar arrRemove_1 = require(\"../util/arrRemove\");\nvar async_1 = require(\"../scheduler/async\");\nvar args_1 = require(\"../util/args\");\nvar executeSchedule_1 = require(\"../util/executeSchedule\");\nfunction bufferTime(bufferTimeSpan) {\n    var _a, _b;\n    var otherArgs = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        otherArgs[_i - 1] = arguments[_i];\n    }\n    var scheduler = (_a = args_1.popScheduler(otherArgs)) !== null && _a !== void 0 ? _a : async_1.asyncScheduler;\n    var bufferCreationInterval = (_b = otherArgs[0]) !== null && _b !== void 0 ? _b : null;\n    var maxBufferSize = otherArgs[1] || Infinity;\n    return lift_1.operate(function (source, subscriber) {\n        var bufferRecords = [];\n        var restartOnEmit = false;\n        var emit = function (record) {\n            var buffer = record.buffer, subs = record.subs;\n            subs.unsubscribe();\n            arrRemove_1.arrRemove(bufferRecords, record);\n            subscriber.next(buffer);\n            restartOnEmit && startBuffer();\n        };\n        var startBuffer = function () {\n            if (bufferRecords) {\n                var subs = new Subscription_1.Subscription();\n                subscriber.add(subs);\n                var buffer = [];\n                var record_1 = {\n                    buffer: buffer,\n                    subs: subs,\n                };\n                bufferRecords.push(record_1);\n                executeSchedule_1.executeSchedule(subs, scheduler, function () { return emit(record_1); }, bufferTimeSpan);\n            }\n        };\n        if (bufferCreationInterval !== null && bufferCreationInterval >= 0) {\n            executeSchedule_1.executeSchedule(subscriber, scheduler, startBuffer, bufferCreationInterval, true);\n        }\n        else {\n            restartOnEmit = true;\n        }\n        startBuffer();\n        var bufferTimeSubscriber = new OperatorSubscriber_1.OperatorSubscriber(subscriber, function (value) {\n            var e_1, _a;\n            var recordsCopy = bufferRecords.slice();\n            try {\n                for (var recordsCopy_1 = __values(recordsCopy), recordsCopy_1_1 = recordsCopy_1.next(); !recordsCopy_1_1.done; recordsCopy_1_1 = recordsCopy_1.next()) {\n                    var record = recordsCopy_1_1.value;\n                    var buffer = record.buffer;\n                    buffer.push(value);\n                    maxBufferSize <= buffer.length && emit(record);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (recordsCopy_1_1 && !recordsCopy_1_1.done && (_a = recordsCopy_1.return)) _a.call(recordsCopy_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }, function () {\n            while (bufferRecords === null || bufferRecords === void 0 ? void 0 : bufferRecords.length) {\n                subscriber.next(bufferRecords.shift().buffer);\n            }\n            bufferTimeSubscriber === null || bufferTimeSubscriber === void 0 ? void 0 : bufferTimeSubscriber.unsubscribe();\n            subscriber.complete();\n            subscriber.unsubscribe();\n        }, undefined, function () { return (bufferRecords = null); });\n        source.subscribe(bufferTimeSubscriber);\n    });\n}\nexports.bufferTime = bufferTime;\n"]},"metadata":{},"sourceType":"script"}