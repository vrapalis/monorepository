import com.bmuschko.gradle.docker.tasks.image.*

plugins {
    id 'com.bmuschko.docker-remote-api'
}

docker {}

task buildDockerImage(type: DockerBuildImage) {
    group 'Docker'
    description 'Build docker image'
    inputDir = file('docker/myapp')
    images.add('test/myapp:latest')
}

task createDockerFile(type: Dockerfile) {
    group 'Docker'
    description 'Create dockerfile'
    from('openjdk:jre-alpine')
    copyFile('my-app-1.0.jar', '/app/my-app-1.0.jar')
    entryPoint('java')
    defaultCommand('-jar', '/app/my-app-1.0.jar')
    exposePort(8080)
}