{"version":3,"file":"libs_feature_login_src_index_ts.js","mappings":"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","sources":["./libs/feature/login/src/index.ts","./libs/feature/login/src/lib/containers/login-cn.component.ts","./libs/feature/login/src/lib/feature-login.module.ts"],"sourcesContent":["export * from './lib/feature-login.module';\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Store } from '@ngrx/store';\nimport { SharedUtilEnvService, SharedUtilSnackService } from '@frontend/shared/util';\nimport { IClientState, LOAD_CLIENT_PROVIDERS_ACTION, selectClientProviders } from '@frontend/state';\n\n@Component({\n  selector: 'frontend-login-cn',\n  template: `\n    <frontend-login-form-cn>\n      <form [formGroup]='form' (ngSubmit)='onSubmit()'>\n        <h1 class='col-12 fs-1 text-opacity-50 text-primary bi-door-open'>\n          <span class='ms-2'>Login</span>\n        </h1>\n\n        <mat-form-field appearance='outline' class='col-12 mt-4'>\n          <mat-label>Email</mat-label>\n          <input matInput type='email' placeholder='Email' formControlName='email'>\n          <mat-icon matSuffix>alternate_email</mat-icon>\n          <mat-error *ngIf=\"form.get('email')?.invalid\">{{getEmailErrorMessage()}}</mat-error>\n        </mat-form-field>\n\n        <mat-form-field appearance='outline' class='col-12 mt-3'>\n          <mat-label>Password</mat-label>\n          <input matInput type='password' placeholder='Password' formControlName='password'>\n          <mat-icon matSuffix>password</mat-icon>\n          <mat-error *ngIf=\"form.get('password')?.invalid\">{{getPasswordErrorMessage()}}</mat-error>\n        </mat-form-field>\n\n        <div class='row col-12 mt-3 justify-content-end'>\n          <a mat-button color='primary' routerLink='/registration' matTooltip='Navigate to registration page'\n             class='col-4 col-lg-2'>Registration</a>\n          <button mat-raised-button color='primary' class='col-6 col-lg-3 ms-1' type='submit' [disabled]='!form.valid'>\n            Submit\n          </button>\n        </div>\n\n        <div class='row col-12 justify-content-end mt-3'>\n          <a mat-button color='accent' routerLink='/forgot-password' matTooltip='Navigate to forgot password page'\n             class='col-6 col-lg-3'>Forgot Password</a>\n        </div>\n\n        <div class='row col-12 mt-4 justify-content-end'>\n          <a mat-icon-button *ngFor='let provider of providers$ | async'\n             [matTooltip]='\"Login with\" + provider.registrationId' class='sn-icon col-1 text-primary fs-2 ms-3'\n             [class]='provider.classes'\n             [href]=\"'/oauth2/authorization/' + provider.registrationId\">\n          </a>\n        </div>\n      </form>\n    </frontend-login-form-cn>\n  `,\n  styles: [`\n      .sn-icon:hover {\n          font-size: 2.5em !important;\n          transition: 0.1s all ease-in;\n      }\n  `]\n})\nexport class LoginCnComponent implements OnInit {\n  form = new FormGroup({});\n  providers$ = this.store.select(selectClientProviders);\n\n  constructor(private fb: FormBuilder, private http: HttpClient, private store: Store<IClientState>,\n              private snackService: SharedUtilSnackService, private envService: SharedUtilEnvService) {\n  }\n\n  onSubmit() {\n    const payload = new HttpParams()\n      .set('email', this.form.value.email)\n      .set('password', this.form.value.password);\n    this.http.post(`${this.envService.env.host}/login`, payload.toString(), {\n      headers: new HttpHeaders()\n        .set('Content-Type', 'application/x-www-form-urlencoded')\n    }).subscribe(console.log, err => {\n      if (err.url && !(err.url.includes('/login?error'))) {\n        window.location.href = err.url;\n      } else {\n        this.snackService.open('Error', 'Login error.');\n      }\n    });\n  }\n\n  getEmailErrorMessage() {\n    if (this.form.get('email')?.hasError('required')) {\n      return 'You must enter a value';\n    }\n\n    if (this.form.get('email')?.hasError('email')) {\n      return 'Not a valid email';\n    }\n\n    return '';\n  }\n\n  getPasswordErrorMessage() {\n    if (this.form.get('password')?.hasError('required')) {\n      return 'You must enter a value';\n    }\n\n    if (this.form.get('password')?.hasError('minlength')) {\n      return 'Should be min 6 length';\n    }\n\n    if (this.form.get('password')?.hasError('maxlength')) {\n      return 'Should be max 12 length';\n    }\n\n    return '';\n  }\n\n  ngOnInit(): void {\n    this.store.dispatch(LOAD_CLIENT_PROVIDERS_ACTION());\n\n    this.form = this.fb.group({\n      email: ['', [Validators.email, Validators.required]],\n      password: ['', [Validators.minLength(6), Validators.maxLength(12), Validators.required]]\n    });\n  }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { LoginCnComponent } from './containers/login-cn.component';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedUiFormModule } from '@frontend/shared/ui';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      { path: '', pathMatch: 'full', component: LoginCnComponent }\n    ]),\n    ReactiveFormsModule,\n    MatInputModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    SharedUiFormModule\n  ],\n  declarations: [\n    LoginCnComponent\n  ]\n})\nexport class FeatureLoginModule {\n}\n"],"names":[],"sourceRoot":"webpack:///"}